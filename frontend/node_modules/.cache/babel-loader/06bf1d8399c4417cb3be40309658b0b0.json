{"ast":null,"code":"import * as React from 'react';\nimport { dispatchDragAndDrop, autoScroll as autoScrollElement, getScrollableParent } from '@progress/kendo-draggable-common';\nimport { noop } from '../noop';\nimport { useInheritedState } from '../hooks/useInheritedState';\nimport { DragContext, DropContext, DragsContext, DropsContext } from '../drag-n-drop/context';\nvar IGNORE_MOUSE_TIMEOUT = 2000;\n/**\n * Represents the KendoReact `useDraggable` hook.\n * Use it to attach `drag` events to a native HTML DOM elements, or custom React Components.\n *\n * For more information, refer to the [KendoReact Draggable]({% slug draggable_drag-and-drop %}) article.\n *\n * @param ref - The `ref` of the HTML Element or React Component which will enable the `draggable` functionality.\n * @param callbacks - A collection of callbacks, called by the `useDraggable` hook when a specific action occurs.\n * @param options - Additional configuration of the `useDraggable` hook.\n */\n\nexport function useDraggable(ref, callbacks, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = callbacks.onPress,\n      onPress = _a === void 0 ? noop : _a,\n      _b = callbacks.onRelease,\n      onRelease = _b === void 0 ? noop : _b,\n      _c = callbacks.onDragStart,\n      onDragStart = _c === void 0 ? noop : _c,\n      _d = callbacks.onDrag,\n      onDrag = _d === void 0 ? noop : _d,\n      _e = callbacks.onDragEnd,\n      onDragEnd = _e === void 0 ? noop : _e;\n  var _f = options.hint,\n      hint = _f === void 0 ? null : _f,\n      _g = options.mouseOnly,\n      mouseOnly = _g === void 0 ? false : _g,\n      _h = options.autoScroll,\n      autoScroll = _h === void 0 ? true : _h,\n      _j = options.scrollContainer,\n      scrollContainer = _j === void 0 ? null : _j;\n\n  var _k = React.useState(false),\n      pressed = _k[0],\n      setPressed = _k[1];\n\n  var _l = React.useState(false),\n      scrolling = _l[0],\n      setScrolling = _l[1];\n\n  var drop = useInheritedState(DropContext)[0];\n\n  var _m = useInheritedState(DragContext),\n      drag = _m[0],\n      setDrag = _m[1];\n\n  var drops = React.useContext(DropsContext)[0];\n\n  var _o = React.useContext(DragsContext),\n      drags = _o[0],\n      registerDrag = _o[1],\n      deregisterDrag = _o[2];\n\n  var velocity = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var scrollInterval = React.useRef();\n  var ignoreMouse = React.useRef(false);\n  var restoreMouseTimeout = React.useRef();\n  var scrollable = React.useRef(null);\n  var unmount = React.useRef(false);\n  var offset = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var pageOffset = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var clientOffset = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var initialClientOffset = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var scrollOffset = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var initialScrollOffset = React.useRef({\n    x: 0,\n    y: 0\n  });\n  var supportPointerEvent = Boolean(window && typeof window !== 'undefined' && window.PointerEvent);\n  var pointers = !mouseOnly && supportPointerEvent;\n  var getElement = React.useCallback(function () {\n    return ref.current && ref.current.element ? ref.current.element : ref.current;\n  }, [ref]);\n  var getHintElement = React.useCallback(function () {\n    return hint && hint.current && hint.current.element ? hint.current.element : hint ? hint.current : null;\n  }, [hint]);\n  var getScrollContainer = React.useCallback(function () {\n    return scrollContainer && scrollContainer.current && scrollContainer.current.element ? scrollContainer.current.element : scrollContainer ? scrollContainer.current : null;\n  }, [scrollContainer]);\n  var getAutoScrollContainer = React.useCallback(function () {\n    return typeof autoScroll === 'object' && autoScroll.boundaryElementRef && autoScroll.boundaryElementRef.current && autoScroll.boundaryElementRef.current.element ? autoScroll.boundaryElementRef.current.element : typeof autoScroll === 'object' && autoScroll.boundaryElementRef && autoScroll.boundaryElementRef.current ? autoScroll.boundaryElementRef.current : null;\n  }, [autoScroll]);\n  var target = React.useRef(null);\n  React.useImperativeHandle(target, function () {\n    return {\n      element: getElement(),\n      hint: getHintElement(),\n      onPress: handlePress,\n      onDragStart: handleDragStart,\n      onDrag: handleDrag,\n      onDragEnd: handleDragEnd,\n      onRelease: handleRelease,\n      data: ref.current\n    };\n  });\n  var getDocument = React.useCallback(function () {\n    var element = getElement();\n    return element ? element.ownerDocument || document : document;\n  }, [getElement]);\n  var getWindow = React.useCallback(function () {\n    var document = getDocument();\n    return document ? document.defaultView || window : window;\n  }, [getDocument]);\n  var getState = React.useCallback(function () {\n    return {\n      drag: drag ? drag.current : null,\n      drop: drop ? drop.current : null,\n      drags: drags.map(function (d) {\n        return d.current;\n      }),\n      drops: drops.map(function (d) {\n        return d.current;\n      }),\n      pressed: pressed,\n      ignoreMouse: ignoreMouse.current,\n      scrollOffset: scrollOffset.current,\n      offset: offset.current,\n      pageOffset: pageOffset.current,\n      initialScrollOffset: initialScrollOffset.current,\n      clientOffset: clientOffset.current,\n      initialClientOffset: initialClientOffset.current,\n      velocity: velocity.current,\n      autoScroll: Boolean(typeof autoScroll === 'object' ? autoScroll.enabled !== false : autoScroll),\n      scrollableParent: getAutoScrollContainer(),\n      autoScrollDirection: typeof autoScroll === 'object' ? autoScroll.direction : {\n        horizontal: true,\n        vertical: true\n      },\n      isScrolling: scrolling\n    };\n  }, [drag, drop, drags, drops, pressed, autoScroll, getAutoScrollContainer, scrolling]);\n  var handlePressedChange = React.useCallback(function (value) {\n    setPressed(value);\n  }, []);\n  var handleScrollingChange = React.useCallback(function (value) {\n    setScrolling(value);\n  }, []);\n  var handleVelocityChange = React.useCallback(function (value) {\n    velocity.current = value;\n  }, []);\n  var handleOffsetChange = React.useCallback(function (value) {\n    offset.current = value;\n  }, []);\n  var handleClientOffsetChange = React.useCallback(function (value) {\n    clientOffset.current = value;\n  }, []);\n  var handlePageOffsetChange = React.useCallback(function (value) {\n    pageOffset.current = value;\n  }, []);\n  var handleInitialClientOffsetChange = React.useCallback(function (value) {\n    initialClientOffset.current = value;\n  }, []);\n  var handleScrollOffsetChange = React.useCallback(function (value) {\n    scrollOffset.current = value;\n  }, []);\n  var handleInitialScrollOffsetChange = React.useCallback(function (value) {\n    initialScrollOffset.current = value;\n  }, []); // Drag Events\n\n  var handlePress = React.useCallback(function (event) {\n    onPress(event);\n  }, [onPress]);\n  var handleRelease = React.useCallback(function (event) {\n    onRelease(event);\n  }, [onRelease]);\n  var handleDragStart = React.useCallback(function (event) {\n    setDrag(target, {\n      target: ref.current,\n      event: event\n    });\n    onDragStart(event);\n  }, [setDrag, ref, onDragStart]);\n  var handleDrag = React.useCallback(function (event) {\n    onDrag(event);\n  }, [onDrag]);\n  var handleDragEnd = React.useCallback(function (event) {\n    if (unmount.current) {\n      return;\n    }\n\n    setDrag(null, {\n      target: ref.current,\n      event: event\n    });\n    onDragEnd(event);\n  }, [onDragEnd, setDrag, ref]);\n  var dispatchDragEvent = React.useCallback(function (event) {\n    dispatchDragAndDrop(getState(), {\n      event: event,\n      payload: target.current\n    }, {\n      onVelocityChange: handleVelocityChange,\n      onOffsetChange: handleOffsetChange,\n      onClientOffsetChange: handleClientOffsetChange,\n      onPageOffsetChange: handlePageOffsetChange,\n      onInitialClientOffsetChange: handleInitialClientOffsetChange,\n      onScrollOffsetChange: handleScrollOffsetChange,\n      onInitialScrollOffsetChange: handleInitialScrollOffsetChange,\n      onIsPressedChange: handlePressedChange,\n      onIsScrollingChange: handleScrollingChange\n    });\n  }, [getState, handleVelocityChange, handleOffsetChange, handlePageOffsetChange, handleClientOffsetChange, handleInitialClientOffsetChange, handleInitialScrollOffsetChange, handlePressedChange, handleScrollOffsetChange, handleScrollingChange]); // Pointer Events\n\n  var handlePointerDown = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handlePointerMove = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handlePointerCancel = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handlePointerUp = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]); // Mouse Events\n\n  var handleMouseDown = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handleMouseMove = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handleMouseUp = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handleContextMenu = React.useCallback(function (event) {\n    event.preventDefault();\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]); // Touch Events\n\n  var handleTouchStart = React.useCallback(function (event) {\n    event.preventDefault();\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handleTouchMove = React.useCallback(function (event) {\n    event.preventDefault();\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]);\n  var handleTouchEnd = React.useCallback(function (event) {\n    if (event.touches.length === 0 && event.changedTouches.length === 1) {\n      var currentWindow = getWindow();\n      ignoreMouse.current = true;\n      restoreMouseTimeout.current = currentWindow.setTimeout(function () {\n        ignoreMouse.current = false;\n      }, IGNORE_MOUSE_TIMEOUT);\n    }\n\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent, getWindow]);\n  var handleScroll = React.useCallback(function (event) {\n    dispatchDragEvent(event);\n  }, [dispatchDragEvent]); // Misc\n\n  var prerequisites = React.useCallback(function () {\n    var element = getElement();\n\n    if (element) {\n      var initialTouchAction_1 = element.style.touchAction;\n      element.style.touchAction = 'none';\n      return function () {\n        element.style.touchAction = initialTouchAction_1;\n      };\n    }\n  }, [getElement]);\n  var register = React.useCallback(function () {\n    registerDrag(target);\n    return function () {\n      deregisterDrag(target);\n    };\n  }, [deregisterDrag, registerDrag]);\n\n  var init = function () {\n    var window = getWindow();\n    var element = getElement();\n    var document = getDocument();\n\n    if (pointers) {\n      if (element) {\n        scrollable.current = getScrollableParent(element);\n\n        if (scrollable.current) {\n          scrollable.current.addEventListener('scroll', handleScroll, {\n            passive: true\n          });\n        }\n\n        element.addEventListener('pointerdown', handlePointerDown, {\n          passive: true\n        });\n      }\n\n      if (pressed) {\n        document.addEventListener('pointermove', handlePointerMove);\n        document.addEventListener('pointerup', handlePointerUp, true);\n        document.addEventListener('contextmenu', handleContextMenu);\n        document.addEventListener('pointercancel', handlePointerCancel, {\n          passive: true\n        });\n      }\n    } else {\n      // Hacky-hacky iOS Safari\n      window.addEventListener('touchmove', noop, {\n        capture: false,\n        passive: false\n      });\n\n      if (element) {\n        element.addEventListener('mousedown', handleMouseDown, {\n          passive: true\n        });\n\n        if (!mouseOnly) {\n          element.addEventListener('touchstart', handleTouchStart, {\n            passive: true\n          });\n\n          if (pressed) {\n            element.addEventListener('touchmove', handleTouchMove, {\n              passive: true\n            });\n            element.addEventListener('touchend', handleTouchEnd, {\n              passive: true\n            });\n          }\n        }\n      }\n\n      if (pressed) {\n        document.addEventListener('mousemove', handleMouseMove, {\n          passive: true\n        });\n        document.addEventListener('mouseup', handleMouseUp, {\n          passive: true\n        });\n      }\n    }\n\n    return function () {\n      if (scrollable.current) {\n        scrollable.current.removeEventListener('scroll', handleScroll);\n      }\n\n      if (element) {\n        element.removeEventListener('pointerdown', handlePointerDown);\n        element.removeEventListener('mousedown', handleMouseDown);\n        element.removeEventListener('touchstart', handleTouchStart);\n        element.removeEventListener('touchmove', handleTouchMove);\n        element.removeEventListener('touchend', handleTouchEnd);\n      }\n\n      document.removeEventListener('pointermove', handlePointerMove);\n      document.removeEventListener('pointerup', handlePointerUp, true);\n      document.removeEventListener('contextmenu', handleContextMenu);\n      document.removeEventListener('pointercancel', handlePointerCancel);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      window.removeEventListener('touchmove', noop);\n      window.clearTimeout(restoreMouseTimeout.current);\n    };\n  };\n\n  React.useEffect(function () {\n    var window = getWindow();\n\n    if (scrolling) {\n      var scrollableParent_1 = getScrollContainer() || getScrollableParent(document.elementFromPoint(clientOffset.current.x, clientOffset.current.y));\n      window.clearInterval(scrollInterval.current);\n      scrollInterval.current = window.setInterval(function () {\n        autoScrollElement(scrollableParent_1, {\n          x: velocity.current.x,\n          y: velocity.current.y\n        });\n      }, 50);\n    }\n\n    return function () {\n      window.clearInterval(scrollInterval.current);\n    };\n  }, [getElement, getScrollContainer, getWindow, scrolling]);\n  React.useEffect(prerequisites, [prerequisites]);\n  React.useEffect(init, [pressed, getWindow, getElement, getDocument, mouseOnly, pointers, handleContextMenu, handleMouseDown, handleMouseMove, handleMouseUp, handlePointerCancel, handlePointerDown, handlePointerMove, handlePointerUp, handleTouchEnd, handleTouchMove, handleTouchStart, handleScroll]);\n  React.useEffect(function () {\n    return function () {\n      unmount.current = true;\n    };\n  }, []);\n  React.useLayoutEffect(register, [register]);\n}","map":{"version":3,"sources":["/Users/leecavazos/Desktop/COSC4353/COSC4353-1/frontend/node_modules/@progress/kendo-react-common/dist/es/hooks/useDraggable.js"],"names":["React","dispatchDragAndDrop","autoScroll","autoScrollElement","getScrollableParent","noop","useInheritedState","DragContext","DropContext","DragsContext","DropsContext","IGNORE_MOUSE_TIMEOUT","useDraggable","ref","callbacks","options","_a","onPress","_b","onRelease","_c","onDragStart","_d","onDrag","_e","onDragEnd","_f","hint","_g","mouseOnly","_h","_j","scrollContainer","_k","useState","pressed","setPressed","_l","scrolling","setScrolling","drop","_m","drag","setDrag","drops","useContext","_o","drags","registerDrag","deregisterDrag","velocity","useRef","x","y","scrollInterval","ignoreMouse","restoreMouseTimeout","scrollable","unmount","offset","pageOffset","clientOffset","initialClientOffset","scrollOffset","initialScrollOffset","supportPointerEvent","Boolean","window","PointerEvent","pointers","getElement","useCallback","current","element","getHintElement","getScrollContainer","getAutoScrollContainer","boundaryElementRef","target","useImperativeHandle","handlePress","handleDragStart","handleDrag","handleDragEnd","handleRelease","data","getDocument","ownerDocument","document","getWindow","defaultView","getState","map","d","enabled","scrollableParent","autoScrollDirection","direction","horizontal","vertical","isScrolling","handlePressedChange","value","handleScrollingChange","handleVelocityChange","handleOffsetChange","handleClientOffsetChange","handlePageOffsetChange","handleInitialClientOffsetChange","handleScrollOffsetChange","handleInitialScrollOffsetChange","event","dispatchDragEvent","payload","onVelocityChange","onOffsetChange","onClientOffsetChange","onPageOffsetChange","onInitialClientOffsetChange","onScrollOffsetChange","onInitialScrollOffsetChange","onIsPressedChange","onIsScrollingChange","handlePointerDown","handlePointerMove","handlePointerCancel","handlePointerUp","handleMouseDown","handleMouseMove","handleMouseUp","handleContextMenu","preventDefault","handleTouchStart","handleTouchMove","handleTouchEnd","touches","length","changedTouches","currentWindow","setTimeout","handleScroll","prerequisites","initialTouchAction_1","style","touchAction","register","init","addEventListener","passive","capture","removeEventListener","clearTimeout","useEffect","scrollableParent_1","elementFromPoint","clearInterval","setInterval","useLayoutEffect"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { dispatchDragAndDrop, autoScroll as autoScrollElement, getScrollableParent } from '@progress/kendo-draggable-common';\nimport { noop } from '../noop';\nimport { useInheritedState } from '../hooks/useInheritedState';\nimport { DragContext, DropContext, DragsContext, DropsContext } from '../drag-n-drop/context';\nvar IGNORE_MOUSE_TIMEOUT = 2000;\n/**\n * Represents the KendoReact `useDraggable` hook.\n * Use it to attach `drag` events to a native HTML DOM elements, or custom React Components.\n *\n * For more information, refer to the [KendoReact Draggable]({% slug draggable_drag-and-drop %}) article.\n *\n * @param ref - The `ref` of the HTML Element or React Component which will enable the `draggable` functionality.\n * @param callbacks - A collection of callbacks, called by the `useDraggable` hook when a specific action occurs.\n * @param options - Additional configuration of the `useDraggable` hook.\n */\nexport function useDraggable(ref, callbacks, options) {\n    if (options === void 0) { options = {}; }\n    var _a = callbacks.onPress, onPress = _a === void 0 ? noop : _a, _b = callbacks.onRelease, onRelease = _b === void 0 ? noop : _b, _c = callbacks.onDragStart, onDragStart = _c === void 0 ? noop : _c, _d = callbacks.onDrag, onDrag = _d === void 0 ? noop : _d, _e = callbacks.onDragEnd, onDragEnd = _e === void 0 ? noop : _e;\n    var _f = options.hint, hint = _f === void 0 ? null : _f, _g = options.mouseOnly, mouseOnly = _g === void 0 ? false : _g, _h = options.autoScroll, autoScroll = _h === void 0 ? true : _h, _j = options.scrollContainer, scrollContainer = _j === void 0 ? null : _j;\n    var _k = React.useState(false), pressed = _k[0], setPressed = _k[1];\n    var _l = React.useState(false), scrolling = _l[0], setScrolling = _l[1];\n    var drop = useInheritedState(DropContext)[0];\n    var _m = useInheritedState(DragContext), drag = _m[0], setDrag = _m[1];\n    var drops = React.useContext(DropsContext)[0];\n    var _o = React.useContext(DragsContext), drags = _o[0], registerDrag = _o[1], deregisterDrag = _o[2];\n    var velocity = React.useRef({ x: 0, y: 0 });\n    var scrollInterval = React.useRef();\n    var ignoreMouse = React.useRef(false);\n    var restoreMouseTimeout = React.useRef();\n    var scrollable = React.useRef(null);\n    var unmount = React.useRef(false);\n    var offset = React.useRef({ x: 0, y: 0 });\n    var pageOffset = React.useRef({ x: 0, y: 0 });\n    var clientOffset = React.useRef({ x: 0, y: 0 });\n    var initialClientOffset = React.useRef({ x: 0, y: 0 });\n    var scrollOffset = React.useRef({ x: 0, y: 0 });\n    var initialScrollOffset = React.useRef({ x: 0, y: 0 });\n    var supportPointerEvent = Boolean(window && (typeof window !== 'undefined') && window.PointerEvent);\n    var pointers = !mouseOnly && supportPointerEvent;\n    var getElement = React.useCallback(function () { return ref.current && ref.current.element\n        ? ref.current.element\n        : ref.current; }, [ref]);\n    var getHintElement = React.useCallback(function () { return hint && hint.current && hint.current.element\n        ? hint.current.element\n        : hint\n            ? hint.current\n            : null; }, [hint]);\n    var getScrollContainer = React.useCallback(function () { return scrollContainer && scrollContainer.current && scrollContainer.current.element\n        ? scrollContainer.current.element\n        : scrollContainer\n            ? scrollContainer.current\n            : null; }, [scrollContainer]);\n    var getAutoScrollContainer = React.useCallback(function () { return typeof autoScroll === 'object' && autoScroll.boundaryElementRef\n        && autoScroll.boundaryElementRef.current && autoScroll.boundaryElementRef.current.element\n        ? autoScroll.boundaryElementRef.current.element\n        : typeof autoScroll === 'object' && autoScroll.boundaryElementRef && autoScroll.boundaryElementRef.current\n            ? autoScroll.boundaryElementRef.current\n            : null; }, [autoScroll]);\n    var target = React.useRef(null);\n    React.useImperativeHandle(target, function () { return ({\n        element: getElement(),\n        hint: getHintElement(),\n        onPress: handlePress,\n        onDragStart: handleDragStart,\n        onDrag: handleDrag,\n        onDragEnd: handleDragEnd,\n        onRelease: handleRelease,\n        data: ref.current\n    }); });\n    var getDocument = React.useCallback(function () {\n        var element = getElement();\n        return element ? element.ownerDocument || document : document;\n    }, [getElement]);\n    var getWindow = React.useCallback(function () {\n        var document = getDocument();\n        return document\n            ? document.defaultView || window\n            : window;\n    }, [getDocument]);\n    var getState = React.useCallback(function () { return ({\n        drag: drag ? drag.current : null,\n        drop: drop ? drop.current : null,\n        drags: drags.map(function (d) { return d.current; }),\n        drops: drops.map(function (d) { return d.current; }),\n        pressed: pressed,\n        ignoreMouse: ignoreMouse.current,\n        scrollOffset: scrollOffset.current,\n        offset: offset.current,\n        pageOffset: pageOffset.current,\n        initialScrollOffset: initialScrollOffset.current,\n        clientOffset: clientOffset.current,\n        initialClientOffset: initialClientOffset.current,\n        velocity: velocity.current,\n        autoScroll: Boolean(typeof autoScroll === 'object' ? autoScroll.enabled !== false : autoScroll),\n        scrollableParent: getAutoScrollContainer(),\n        autoScrollDirection: typeof autoScroll === 'object' ? autoScroll.direction : { horizontal: true, vertical: true },\n        isScrolling: scrolling\n    }); }, [drag, drop, drags, drops, pressed, autoScroll, getAutoScrollContainer, scrolling]);\n    var handlePressedChange = React.useCallback(function (value) {\n        setPressed(value);\n    }, []);\n    var handleScrollingChange = React.useCallback(function (value) {\n        setScrolling(value);\n    }, []);\n    var handleVelocityChange = React.useCallback(function (value) {\n        velocity.current = value;\n    }, []);\n    var handleOffsetChange = React.useCallback(function (value) {\n        offset.current = value;\n    }, []);\n    var handleClientOffsetChange = React.useCallback(function (value) {\n        clientOffset.current = value;\n    }, []);\n    var handlePageOffsetChange = React.useCallback(function (value) {\n        pageOffset.current = value;\n    }, []);\n    var handleInitialClientOffsetChange = React.useCallback(function (value) {\n        initialClientOffset.current = value;\n    }, []);\n    var handleScrollOffsetChange = React.useCallback(function (value) {\n        scrollOffset.current = value;\n    }, []);\n    var handleInitialScrollOffsetChange = React.useCallback(function (value) {\n        initialScrollOffset.current = value;\n    }, []);\n    // Drag Events\n    var handlePress = React.useCallback(function (event) {\n        onPress(event);\n    }, [onPress]);\n    var handleRelease = React.useCallback(function (event) {\n        onRelease(event);\n    }, [onRelease]);\n    var handleDragStart = React.useCallback(function (event) {\n        setDrag(target, { target: ref.current, event: event });\n        onDragStart(event);\n    }, [setDrag, ref, onDragStart]);\n    var handleDrag = React.useCallback(function (event) {\n        onDrag(event);\n    }, [onDrag]);\n    var handleDragEnd = React.useCallback(function (event) {\n        if (unmount.current) {\n            return;\n        }\n        setDrag(null, { target: ref.current, event: event });\n        onDragEnd(event);\n    }, [onDragEnd, setDrag, ref]);\n    var dispatchDragEvent = React.useCallback(function (event) {\n        dispatchDragAndDrop(getState(), { event: event, payload: target.current }, {\n            onVelocityChange: handleVelocityChange,\n            onOffsetChange: handleOffsetChange,\n            onClientOffsetChange: handleClientOffsetChange,\n            onPageOffsetChange: handlePageOffsetChange,\n            onInitialClientOffsetChange: handleInitialClientOffsetChange,\n            onScrollOffsetChange: handleScrollOffsetChange,\n            onInitialScrollOffsetChange: handleInitialScrollOffsetChange,\n            onIsPressedChange: handlePressedChange,\n            onIsScrollingChange: handleScrollingChange\n        });\n    }, [\n        getState,\n        handleVelocityChange,\n        handleOffsetChange,\n        handlePageOffsetChange,\n        handleClientOffsetChange,\n        handleInitialClientOffsetChange,\n        handleInitialScrollOffsetChange,\n        handlePressedChange,\n        handleScrollOffsetChange,\n        handleScrollingChange\n    ]);\n    // Pointer Events\n    var handlePointerDown = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handlePointerMove = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handlePointerCancel = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handlePointerUp = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    // Mouse Events\n    var handleMouseDown = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handleMouseMove = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handleMouseUp = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handleContextMenu = React.useCallback(function (event) {\n        event.preventDefault();\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    // Touch Events\n    var handleTouchStart = React.useCallback(function (event) {\n        event.preventDefault();\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handleTouchMove = React.useCallback(function (event) {\n        event.preventDefault();\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    var handleTouchEnd = React.useCallback(function (event) {\n        if (event.touches.length === 0 && event.changedTouches.length === 1) {\n            var currentWindow = getWindow();\n            ignoreMouse.current = true;\n            restoreMouseTimeout.current = currentWindow.setTimeout(function () { ignoreMouse.current = false; }, IGNORE_MOUSE_TIMEOUT);\n        }\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent, getWindow]);\n    var handleScroll = React.useCallback(function (event) {\n        dispatchDragEvent(event);\n    }, [dispatchDragEvent]);\n    // Misc\n    var prerequisites = React.useCallback(function () {\n        var element = getElement();\n        if (element) {\n            var initialTouchAction_1 = element.style.touchAction;\n            element.style.touchAction = 'none';\n            return function () {\n                element.style.touchAction = initialTouchAction_1;\n            };\n        }\n    }, [getElement]);\n    var register = React.useCallback(function () {\n        registerDrag(target);\n        return function () {\n            deregisterDrag(target);\n        };\n    }, [deregisterDrag, registerDrag]);\n    var init = function () {\n        var window = getWindow();\n        var element = getElement();\n        var document = getDocument();\n        if (pointers) {\n            if (element) {\n                scrollable.current = getScrollableParent(element);\n                if (scrollable.current) {\n                    scrollable.current.addEventListener('scroll', handleScroll, { passive: true });\n                }\n                element.addEventListener('pointerdown', handlePointerDown, { passive: true });\n            }\n            if (pressed) {\n                document.addEventListener('pointermove', handlePointerMove);\n                document.addEventListener('pointerup', handlePointerUp, true);\n                document.addEventListener('contextmenu', handleContextMenu);\n                document.addEventListener('pointercancel', handlePointerCancel, { passive: true });\n            }\n        }\n        else {\n            // Hacky-hacky iOS Safari\n            window.addEventListener('touchmove', noop, { capture: false, passive: false });\n            if (element) {\n                element.addEventListener('mousedown', handleMouseDown, { passive: true });\n                if (!mouseOnly) {\n                    element.addEventListener('touchstart', handleTouchStart, { passive: true });\n                    if (pressed) {\n                        element.addEventListener('touchmove', handleTouchMove, { passive: true });\n                        element.addEventListener('touchend', handleTouchEnd, { passive: true });\n                    }\n                }\n            }\n            if (pressed) {\n                document.addEventListener('mousemove', handleMouseMove, { passive: true });\n                document.addEventListener('mouseup', handleMouseUp, { passive: true });\n            }\n        }\n        return function () {\n            if (scrollable.current) {\n                scrollable.current.removeEventListener('scroll', handleScroll);\n            }\n            if (element) {\n                element.removeEventListener('pointerdown', handlePointerDown);\n                element.removeEventListener('mousedown', handleMouseDown);\n                element.removeEventListener('touchstart', handleTouchStart);\n                element.removeEventListener('touchmove', handleTouchMove);\n                element.removeEventListener('touchend', handleTouchEnd);\n            }\n            document.removeEventListener('pointermove', handlePointerMove);\n            document.removeEventListener('pointerup', handlePointerUp, true);\n            document.removeEventListener('contextmenu', handleContextMenu);\n            document.removeEventListener('pointercancel', handlePointerCancel);\n            document.removeEventListener('mousemove', handleMouseMove);\n            document.removeEventListener('mouseup', handleMouseUp);\n            window.removeEventListener('touchmove', noop);\n            window.clearTimeout(restoreMouseTimeout.current);\n        };\n    };\n    React.useEffect(function () {\n        var window = getWindow();\n        if (scrolling) {\n            var scrollableParent_1 = getScrollContainer()\n                || getScrollableParent(document.elementFromPoint(clientOffset.current.x, clientOffset.current.y));\n            window.clearInterval(scrollInterval.current);\n            scrollInterval.current = window.setInterval(function () {\n                autoScrollElement(scrollableParent_1, { x: velocity.current.x, y: velocity.current.y });\n            }, 50);\n        }\n        return function () {\n            window.clearInterval(scrollInterval.current);\n        };\n    }, [getElement, getScrollContainer, getWindow, scrolling]);\n    React.useEffect(prerequisites, [prerequisites]);\n    React.useEffect(init, [\n        pressed,\n        getWindow,\n        getElement,\n        getDocument,\n        mouseOnly,\n        pointers,\n        handleContextMenu,\n        handleMouseDown,\n        handleMouseMove,\n        handleMouseUp,\n        handlePointerCancel,\n        handlePointerDown,\n        handlePointerMove,\n        handlePointerUp,\n        handleTouchEnd,\n        handleTouchMove,\n        handleTouchStart,\n        handleScroll\n    ]);\n    React.useEffect(function () {\n        return function () {\n            unmount.current = true;\n        };\n    }, []);\n    React.useLayoutEffect(register, [register]);\n}\n"]},"metadata":{},"sourceType":"module"}